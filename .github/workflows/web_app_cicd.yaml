name: WebApp CI/CD

on:
    push:
        branches: [ staging-** ]
    pull_request:
        branches: [ staging-** ]

jobs:
    set_the_staging_branch:
      permissions:
          id-token: write
          contents: read
          pull-requests: write
          statuses: write
      runs-on: ubuntu-latest
      steps:
           - name: Plan from Composite Action
             uses: pseudonative/reusable_work_flows/compositBranchAuthAWS@main
             with:
                OIDC_ROLE: ${{ secrets.OIDC_ROLE }}
                aws_region: "us-east-1"
                REF: ${{ github.ref_name }}
                